<Window x:Class="BlackFlag.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:BlackFlag"
        xmlns:views="clr-namespace:BlackFlag.Views"
        mc:Ignorable="d"
        Title="BlackFlag v2.0 - Professional ECU Suite" 
        Height="800" Width="1200"
        MinHeight="600" MinWidth="900"
        WindowStartupLocation="CenterScreen"
        Background="{DynamicResource BackgroundBrush}"
        Foreground="{DynamicResource ForegroundBrush}">
    
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis"/>
    </Window.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Title Bar -->
        <Border Grid.Row="0" Background="{DynamicResource HeaderBrush}" Padding="15,10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <TextBlock Text="â˜ " FontSize="24" Foreground="{DynamicResource AccentBrush}" Margin="0,0,10,0"/>
                    <TextBlock Text="BLACKFLAG v2.0" FontSize="20" FontWeight="Bold" 
                               Foreground="{DynamicResource AccentBrush}" VerticalAlignment="Center"/>
                    <TextBlock Text=" | Professional ECU Suite" FontSize="14" 
                               Foreground="{DynamicResource SecondaryForeground}" VerticalAlignment="Center" Margin="10,0,0,0"/>
                </StackPanel>
                
                <StackPanel Grid.Column="2" Orientation="Horizontal">
                    <ComboBox x:Name="ThemeSelector" Width="150" Margin="0,0,15,0"
                              SelectionChanged="ThemeSelector_SelectionChanged"
                              Style="{DynamicResource ComboBoxStyle}">
                        <ComboBoxItem Content="ðŸŒ™ Dark Mode" IsSelected="True"/>
                        <ComboBoxItem Content="ðŸ’¾ Retro Green"/>
                        <ComboBoxItem Content="ðŸ”§ Ford Blue"/>
                        <ComboBoxItem Content="ðŸš— Orange Tech"/>
                    </ComboBox>
                    <Ellipse Width="10" Height="10" Fill="{DynamicResource StatusOnline}" Margin="0,0,5,0"/>
                    <TextBlock Text="Online" Foreground="{DynamicResource StatusOnline}" VerticalAlignment="Center"/>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- Vehicle Selector Bar -->
        <Border Grid.Row="1" Background="{DynamicResource SurfaceBrush}" Padding="15,8" BorderThickness="0,0,0,1" 
                BorderBrush="{DynamicResource BorderBrush}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="200"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="250"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock Grid.Column="0" Text="Manufacturer:" VerticalAlignment="Center" Margin="0,0,10,0"/>
                <ComboBox Grid.Column="1" x:Name="ManufacturerCombo" 
                          SelectionChanged="ManufacturerCombo_SelectionChanged"
                          Style="{DynamicResource ComboBoxStyle}"/>
                
                <TextBlock Grid.Column="2" Text="Vehicle:" VerticalAlignment="Center" Margin="20,0,10,0"/>
                <ComboBox Grid.Column="3" x:Name="VehicleCombo"
                          SelectionChanged="VehicleCombo_SelectionChanged"
                          Style="{DynamicResource ComboBoxStyle}"/>
                
                <Button Grid.Column="4" Content="âž• Add to History" Margin="15,0,0,0"
                        Click="AddToHistory_Click" Style="{DynamicResource ButtonStyle}"/>
                
                <TextBlock Grid.Column="6" x:Name="SelectedVehicleInfo" 
                           Foreground="{DynamicResource AccentBrush}" VerticalAlignment="Center"/>
            </Grid>
        </Border>
        
        <!-- Main Content Area -->
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="220"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <!-- Side Navigation -->
            <Border Grid.Column="0" Background="{DynamicResource SurfaceBrush}" 
                    BorderThickness="0,0,1,0" BorderBrush="{DynamicResource BorderBrush}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="10">
                        <TextBlock Text="FUNCTIONS" FontWeight="Bold" Foreground="{DynamicResource SecondaryForeground}" 
                                   Margin="5,10,0,10"/>
                        
                        <RadioButton x:Name="NavHome" Content="ðŸ  Dashboard" GroupName="Nav" IsChecked="True"
                                     Style="{DynamicResource NavButtonStyle}" Click="NavButton_Click"/>
                        <RadioButton x:Name="NavVinDecoder" Content="ðŸ” VIN Decoder" GroupName="Nav"
                                     Style="{DynamicResource NavButtonStyle}" Click="NavButton_Click"/>
                        <RadioButton x:Name="NavEcuScanner" Content="ðŸ”Œ ECU Scanner" GroupName="Nav"
                                     Style="{DynamicResource NavButtonStyle}" Click="NavButton_Click"/>
                        <RadioButton x:Name="NavVoltageMeter" Content="âš¡ Voltage Meter" GroupName="Nav"
                                     Style="{DynamicResource NavButtonStyle}" Click="NavButton_Click"/>
                        <RadioButton x:Name="NavWiringDiagrams" Content="ðŸ“‹ Wiring Diagrams" GroupName="Nav"
                                     Style="{DynamicResource NavButtonStyle}" Click="NavButton_Click"/>
                        <RadioButton x:Name="NavTuneManager" Content="ðŸŽ›ï¸ Tune Manager" GroupName="Nav"
                                     Style="{DynamicResource NavButtonStyle}" Click="NavButton_Click"/>
                        <RadioButton x:Name="NavEcuCloning" Content="ðŸ’¾ ECU Cloning" GroupName="Nav"
                                     Style="{DynamicResource NavButtonStyle}" Click="NavButton_Click"/>
                        <RadioButton x:Name="NavPerformance" Content="ðŸŽï¸ Performance" GroupName="Nav"
                                     Style="{DynamicResource NavButtonStyle}" Click="NavButton_Click"/>
                        <RadioButton x:Name="NavEmissionsDelete" Content="ðŸš« Emissions Delete" GroupName="Nav"
                                     Style="{DynamicResource NavButtonStyle}" Click="NavButton_Click"/>
                        <RadioButton x:Name="NavJ2534" Content="ðŸ”§ J2534 PassThru" GroupName="Nav"
                                     Style="{DynamicResource NavButtonStyle}" Click="NavButton_Click"/>
                        <RadioButton x:Name="NavEcuUnlock" Content="ðŸ”“ ECU Unlock" GroupName="Nav"
                                     Style="{DynamicResource NavButtonStyle}" Click="NavButton_Click"/>
                        <RadioButton x:Name="NavLiveData" Content="ðŸ“Š Live Data" GroupName="Nav"
                                     Style="{DynamicResource NavButtonStyle}" Click="NavButton_Click"/>
                        <RadioButton x:Name="NavOeFlash" Content="ðŸ“ OE Flash Files" GroupName="Nav"
                                     Style="{DynamicResource NavButtonStyle}" Click="NavButton_Click"/>
                        
                        <Separator Margin="5,15" Background="{DynamicResource BorderBrush}"/>
                        
                        <TextBlock Text="HISTORY" FontWeight="Bold" Foreground="{DynamicResource SecondaryForeground}" 
                                   Margin="5,5,0,10"/>
                        <ListBox x:Name="HistoryList" Background="Transparent" BorderThickness="0"
                                 ItemsSource="{Binding VehicleHistory}" 
                                 SelectionChanged="HistoryList_SelectionChanged">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding DisplayName}" Foreground="{DynamicResource ForegroundBrush}"
                                               Padding="5,3" Cursor="Hand"/>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </StackPanel>
                </ScrollViewer>
            </Border>
            
            <!-- Content Frame -->
            <Frame Grid.Column="1" x:Name="ContentFrame" NavigationUIVisibility="Hidden" Margin="20"/>
        </Grid>
        
        <!-- Status Bar -->
        <Border Grid.Row="3" Background="{DynamicResource HeaderBrush}" Padding="15,8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock Grid.Column="0" Text="Ready" Foreground="{DynamicResource SecondaryForeground}"/>
                <TextBlock Grid.Column="1" Text="Database: Local" Foreground="{DynamicResource AccentBrush}" Margin="0,0,20,0"/>
                <TextBlock Grid.Column="2" Text="Connection: â€”" Foreground="{DynamicResource SecondaryForeground}" Margin="0,0,20,0"/>
                <TextBlock Grid.Column="3" Text="v2.0.0" Foreground="{DynamicResource SecondaryForeground}"/>
            </Grid>
        </Border>
    </Grid>
</Window>
